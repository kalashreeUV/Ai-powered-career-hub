<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Resume Analyzer | CareerHub</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f4f6f9; }
    .card { border-radius: 15px; margin-bottom: 20px; }
    .card-header { border-radius: 15px 15px 0 0; }
    h3, h4, h5 { font-weight: 600; }
    ul { margin: 0; padding-left: 20px; }
    .btn-lg { border-radius: 30px; }
    .progress { height: 25px; border-radius: 20px; }
    .alert { border-radius: 12px; }
    .badge-skill { margin: 3px; font-size: 0.9em; }
    .section-title { margin-bottom: 10px; }
  </style>
</head>
<body>

<div class="container mt-5 mb-5">
  <div class="card shadow-lg border-0">
    <div class="card-header bg-primary text-white text-center py-3">
      <h3 class="mb-0">üìÑ Resume Analyzer</h3>
      <small>Upload your resume and get instant ATS-based insights</small>
    </div>
    <div class="card-body p-4">

      <!-- Upload Form -->
      <form action="{{ url_for('resume') }}" method="POST" enctype="multipart/form-data" class="mb-4">
        <div class="row g-2">
          <div class="col-md-10">
            <input type="file" name="resume" accept=".pdf,.docx" class="form-control" required>
          </div>
          <div class="col-md-2 d-grid">
            <button type="submit" class="btn btn-primary btn-lg">Analyze</button>
          </div>
        </div>
      </form>

      <!-- Error -->
      {% if error %}
      <div class="alert alert-danger text-center">
        ‚ö†Ô∏è {{ error }}
      </div>
      {% endif %}

      {% if resume_score %}
      <!-- Overall Score -->
      <div class="card mb-3">
        <div class="card-body text-center">
          <h4 class="section-title">Overall Resume Score: 
            <span class="text-success fw-bold">{{ resume_score }}/100</span>
          </h4>
          <div class="progress mb-3">
            <div class="progress-bar bg-success fw-bold" role="progressbar"
                 style="width: {{ resume_score }}%;" aria-valuenow="{{ resume_score }}"
                 aria-valuemin="0" aria-valuemax="100">
              {{ resume_score }}%
            </div>
          </div>
        </div>
      </div>

      <!-- Feedback -->
      {% if feedback %}
      <div class="card mb-3">
        <div class="card-header bg-info text-white">
          üìå Feedback & Suggestions
        </div>
        <div class="card-body">
          <ul>
            {% for f in feedback %}
              <li>{{ f }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}

      <!-- Skills -->
      {% if extracted_skills %}
      <div class="card mb-3">
        <div class="card-header bg-success text-white">
          ‚úÖ Skills Detected
        </div>
        <div class="card-body">
          {% for skill in extracted_skills %}
            <span class="badge bg-success badge-skill">{{ skill }}</span>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Sections Found -->
      {% if sections_found %}
      <div class="card mb-3">
        <div class="card-header bg-dark text-white">
          üìÇ Sections Identified
        </div>
        <div class="card-body">
          <ul>
            {% for sec in sections_found %}
              <li>{{ sec.capitalize() }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}

      <!-- Achievements -->
      {% if achievements %}
      <div class="card mb-3">
        <div class="card-header bg-secondary text-white">
          üèÜ Achievements Detected
        </div>
        <div class="card-body">
          <ul>
            {% for ach in achievements %}
              <li>{{ ach }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}

      <!-- Contact Info -->
      {% if resume_data.contact %}
      <div class="card mb-3">
        <div class="card-header bg-warning text-dark">
          üìß Contact Information
        </div>
        <div class="card-body">
          <ul class="mb-0">
            {% for key, val in resume_data.contact.items() %}
              {% if val %}<li><b>{{ key|capitalize }}:</b> {{ val }}</li>{% endif %}
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}
      {% endif %}

    </div>
  </div>
</div>

</body>
</html>
